require=function(r,e,n){function t(n,o){function i(r){return t(i.resolve(r))}function f(e){return r[n][1][e]||e}if(!e[n]){if(!r[n]){var c="function"==typeof require&&require;if(!o&&c)return c(n,!0);if(u)return u(n,!0);var l=new Error("Cannot find module '"+n+"'");throw l.code="MODULE_NOT_FOUND",l}i.resolve=f;var a=e[n]=new t.Module;r[n][0].call(a.exports,i,a,a.exports)}return e[n].exports}function o(){this.bundle=t,this.exports={}}var u="function"==typeof require&&require;t.Module=o,t.modules=r,t.cache=e,t.parent=u;for(var i=0;i<n.length;i++)t(n[i]);return t}({6:[function(require,module,exports) {
class e{static generateRandom(e,t){return Math.floor(Math.random()*(t-e))+e}constructor(e,t,a){this.m=e,this.n=t,this.bombs=a,this.isGameOver=!1,this.boardState=Array(this.n).fill(0).map(()=>Array(this.m).fill(0))}isReachable(e,t){const{m:a,n:s}=this;return e>=0&&t>=0&&e<a&&t<s}printBoardHtml(){const{n:e,m:t}=this,a=document.createElement("tbody");a.className="table";for(var s=0;s<t;s+=1){const t=document.createElement("tr");t.setAttribute("class","row");for(var i=0;i<e;i+=1){const e=document.createElement("td");e.setAttribute("class","cell not-mined"),e.setAttribute("id",`${s}-${i}`),e.dataset.coord=`${s}-${i}`,t.appendChild(e)}a.appendChild(t)}document.getElementById("minesweeper").appendChild(a)}getBoardState(){return this.boardState}initBombs(){const{n:t,m:a,bombs:s,boardState:i}=this;let n=0;if(t*a<s)alert("You crazy!");else for(;n<s;){const s=e.generateRandom(0,a),i=e.generateRandom(0,t);-1!==this.boardState[s][i]&&(this.boardState[s][i]=-1,n++)}}handleBoardClick(e){const t=this.boardState.slice(),{isGameOver:a}=this;if(!0===a)return alert("You lost!"),void e.stopPropagation();const s=e.target.dataset.coord.split("-");"cell mined"!==e.target.className&&(-1===t[s[0]][s[1]]?(this.gameOverBoard(),e.target.setAttribute("class","cell blast"),this.isGameOver=!0):this.playMinesweeper(parseInt(s[0],10),parseInt(s[1],10)))}getCell(e,t){return document.getElementById(`${e}-${t}`)}countMinesNearByUtil(e,t){const{boardState:a}=this;let s=0;return!0===this.isReachable(e,t+1)&&-1===a[e][t+1]&&(s+=1),!0===this.isReachable(e+1,t+1)&&-1===a[e+1][t+1]&&(s+=1),!0===this.isReachable(e+1,t)&&-1===a[e+1][t]&&(s+=1),!0===this.isReachable(e+1,t-1)&&-1===a[e+1][t-1]&&(s+=1),!0===this.isReachable(e,t-1)&&-1===a[e][t-1]&&(s+=1),!0===this.isReachable(e-1,t-1)&&-1===a[e-1][t-1]&&(s+=1),!0===this.isReachable(e-1,t+1)&&-1===a[e-1][t+1]&&(s+=1),!0===this.isReachable(e-1,t)&&-1===a[e-1][t]&&(s+=1),s}countMinesAll(){const{n:e,m:t,boardState:a}=this;for(var s=0;s<t;s++)for(var i=0;i<e;i++)-1!==a[s][i]&&(a[s][i]=this.countMinesNearByUtil(s,i))}openTile(e,t){const a=this.getCell(e,t);a.setAttribute("class","cell mined"),a.innerHTML=this.boardState[e][t]}playMinesweeper(e,t){const{boardState:a}=this;-1!==a[e][t]&&!0===this.isReachable(e,t)&&-1!==a[e][t]&&this.openTile(e,t)}gameOverBoard(){const{m:e,n:t,boardState:a}=this;for(var s=0;s<e;s++)for(var i=0;i<t;i++){if(-1!==a[s][i])a[s][i]=this.openTile(s,i);else this.getCell(s,i).setAttribute("class","cell bomb")}}}function t(e){e.preventDefault()}function a(e,t){t||(t=window.location.href),e=e.replace(/[\[\]]/g,"\\$&");var a=new RegExp("[?&]"+e+"(=([^&#]*)|&|#|$)").exec(t);return a?a[2]?decodeURIComponent(a[2].replace(/\+/g," ")):"":null}!function(){const s=parseInt(a("row"),10)||10,i=parseInt(a("column"),10)||10,n=parseInt(a("mines"),10)||20;if(s*i<n)return void alert("More mines than spaces!");const r=new e(s,i,n);r.printBoardHtml(),r.initBombs(),r.countMinesAll(),window.board=r,window.handleFormSubmit=t,document.getElementById("minesweeper").addEventListener("click",r.handleBoardClick.bind(r))}();
},{}]},{},[6])